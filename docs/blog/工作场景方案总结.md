# 工作场景方案总结

---

## 对于定时任务的处理：
1. 可以用表存下来，然后job轮询表

### 防止一个任务执行太久，导致重复执行:
- 先update再select，再表中添加batch_id, 对一批数据(如 limit 100)赋值同一个batch_id，再select查询数据然后执行
  - 缺点：没有数据也会执行
  - 优点：支持并发

并发读取任务数据：只能在处理时候加锁了

## 对于修复数据：
1. 等查询出来的所有数据修复后，执行下一条查询，使用 limit 1000即可。 （同步，缓慢）
2. 修改的数据与查询的条件无关时，可以limit skip, size 来多线程执行。（并发，快速）

## 界面并发控制方案：
1. 下发一个版本号，提交时带上来。 后端做数据最新版本好校验。 以此来防止在某个时间段的重复提交问题。